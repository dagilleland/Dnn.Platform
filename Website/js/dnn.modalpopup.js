(function(a,b){a.dnnModal={load:function(){try{if(parent.location.href!==undefined){var j=parent;var g=j.parent;if(typeof(g.$find)!="undefined"){if(location.href.indexOf("popUp")==-1||j.location.href.indexOf("popUp")>-1){var c=j.jQuery("#iPopUp");var f=c.dialog("option","refresh");var h=c.dialog("option","closingUrl");var d=c.dialog("option","minWidth");var i=c.dialog("option","minHeight");var k=c.dialog("option","showReturn");if(!h){h=location.href}if(c.dialog("isOpen")===true){c.dialog("option",{close:function(l,m){dnnModal.refreshPopup({url:h,width:d,height:i,showReturn:k,refresh:f})}}).dialog("close")}}else{j.jQuery("#iPopUp").dialog({autoOpen:false,title:document.title})}}}return true}catch(e){return false}},show:function(c,m,k,e,g,j){var i=b("#iPopUp");if(i.length==0){i=b('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>');b(document.body).append(i)}else{i.attr("src","about:blank")}b(document).find("html").css("overflow","hidden");i.dialog({modal:true,autoOpen:true,dialogClass:"dnnFormPopup",position:"center",minWidth:e,minHeight:k,maxWidth:1920,maxHeight:1080,resizable:true,closeOnEscape:true,refresh:g,showReturn:m,closingUrl:j,close:function(n,o){dnnModal.closePopUp(g,j)}}).width(e-11).height(k-11);if(i.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length===0){var d=b('<a class="dnnModalCtrl"></a>');i.parent().find(".ui-dialog-titlebar-close").wrap(d);var h=b('<a href="#" class="dnnToggleMax"><span>Max</span></a>');i.parent().find(".ui-dialog-titlebar-close").before(h);h.click(function(p){p.preventDefault();var q=b(a),n,o;if(i.data("isMaximized")){n=i.data("height");o=i.data("width");i.data("isMaximized",false)}else{i.data("height",i.dialog("option","minHeight")).data("width",i.dialog("option","minWidth")).data("position",i.dialog("option","position"));n=q.height()-46;o=q.width()-40;i.data("isMaximized",true)}i.dialog({height:n,width:o});i.dialog({position:"center"})})}var f=function(){var n=b('<div class="dnnLoading"></div>');n.css({width:i.width(),height:i.height()});i.before(n)};var l=function(){i.prev(".dnnLoading").remove()};f();i[0].src=c;i.bind("load",function(){l()});if(m.toString()=="true"){return false}},closePopUp:function(e,d){var f=parent;var c=f.jQuery("#iPopUp");if(typeof e==="undefined"||e==null){e=true}if(e.toString()=="true"){if(typeof d==="undefined"||d==""){d=f.location.href}f.location.href=d;c.hide()}else{c.dialog("option","close",null).dialog("close")}b(f.document).find("html").css("overflow","")},refreshPopup:function(c){var d=parent;var e=d.parent;if(d.location.href!==e.location.href&&d.location.href!==c.url){e.dnnModal.show(c.url,c.showReturn,c.height,c.width,c.refresh,c.closingUrl)}else{dnnModal.closePopUp(c.refresh,c.url)}}};a.dnnModal.load()}(window,jQuery));